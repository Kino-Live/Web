# Payment Service Architecture

## Структура

### Типы (`types/payment.ts`)
- Все TypeScript интерфейсы для платежей
- Типизированные запросы и ответы
- Enum для статусов платежей

### Конфигурация (`config/payment.ts`)
- Централизованная конфигурация LiqPay
- Переменные окружения
- Константы маршрутов

### Сервис (`services/liqpay.service.ts`)
- Класс `LiqPayService` с статическими методами
- Инкапсуляция всей логики работы с LiqPay
- Генерация подписей, кодирование/декодирование данных

### Утилиты (`utils/payment.ts`, `utils/booking.ts`)
- Валидация параметров
- Парсинг URL параметров
- Вспомогательные функции для работы с бронированием

### Хуки (`hooks/usePayment.ts`, `hooks/useTicketCreation.ts`)
- Переиспользуемая логика для компонентов
- Управление состоянием загрузки и ошибок
- Инкапсуляция API вызовов

### Компоненты (`components/payment/`)
- Переиспользуемые UI компоненты
- Разделение ответственности (форма, загрузка, ошибка, успех)

## Принципы

1. **Separation of Concerns** - каждый модуль отвечает за свою область
2. **DRY** - переиспользование кода через сервисы и хуки
3. **Type Safety** - полная типизация TypeScript
4. **Error Handling** - централизованная обработка ошибок
5. **Testability** - легко тестируемая архитектура

